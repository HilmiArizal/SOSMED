(this.webpackJsonphilmisosmed=this.webpackJsonphilmisosmed||[]).push([[0],{156:function(e,t,c){},158:function(e,t,c){},169:function(e,t,c){},217:function(e,t,c){},218:function(e,t,c){},220:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(45),a=c.n(s),r=(c(156),c(10)),i=c(17),l=c(236),j=c(62),d=c(234),b=c.p+"static/media/logo-hs.540f72d8.png",o=c.p+"static/media/male-avatar.07fe7c61.svg",u=c(22),m=c(105),O={user:JSON.parse(localStorage.getItem("user"))||null},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload})}},h=c(1),v=Object(n.createContext)(O),f=function(e){var t=e.children,c=Object(n.useReducer)(x,O),s=Object(u.a)(c,2),a=s[0],r=s[1];return Object(h.jsx)(v.Provider,{value:{user:a.user,dispatch:r},children:t})},g=(c(158),function(){var e=Object(n.useContext)(v).user;return Object(h.jsx)("div",{className:"header-body",children:Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light fixed-top",children:Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)("div",{className:"navbar-brand",children:Object(h.jsx)("img",{src:b,alt:"img-logo"})}),Object(h.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{className:"navbar-toggler-icon"})}),Object(h.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02",children:[Object(h.jsx)("div",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:Object(h.jsx)(l.a,{icon:Object(h.jsx)(j.a,{name:"search",inverted:!0,circular:!0,link:!0}),placeholder:"Cari teman..."})}),Object(h.jsxs)("div",{className:"d-flex list-right",children:[Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"/messanger",children:Object(h.jsx)(j.a,{circular:!0,name:"chat",inverted:!0,size:"large"})})}),Object(h.jsx)("li",{children:Object(h.jsx)(j.a,{circular:!0,name:"alarm",inverted:!0,size:"large"})}),Object(h.jsx)("li",{children:Object(h.jsxs)("div",{className:"btn-group",children:[Object(h.jsx)("div",{className:"dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(h.jsx)(j.a,{circular:!0,name:"user",inverted:!0,size:"large"})}),Object(h.jsxs)("div",{className:"dropdown-menu dropdown-menu-end",children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-3",children:Object(h.jsx)("img",{src:o,alt:"img-am"})}),Object(h.jsxs)("div",{className:"col-md-9 profile",children:[Object(h.jsx)("div",{children:"Hilmi Arizal"}),Object(h.jsx)("div",{children:"Front End Developer"})]})]}),Object(h.jsx)(d.a,{}),Object(h.jsx)("div",{className:"menu",children:Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:[Object(h.jsx)(j.a,{circular:!0,name:"setting",inverted:!0}),Object(h.jsx)("span",{children:"Pengaturan & Privasi"})]}),Object(h.jsxs)("li",{children:[Object(h.jsx)(j.a,{circular:!0,name:"question",inverted:!0}),Object(h.jsx)("span",{children:"Bantuan & Dukungan"})]})]})}),Object(h.jsx)(d.a,{}),Object(h.jsx)(i.b,{to:"/",children:Object(h.jsxs)("div",{className:"logout",onClick:function(){localStorage.removeItem("user"),setTimeout((function(){console.log(e),window.location.reload()}),500)},children:[Object(h.jsx)(j.a,{circular:!0,name:"sign-out",inverted:!0}),Object(h.jsx)("span",{children:"Keluar"})]})})]})]})})]})]})]})})})}),p=c(238),N=c(239),w=c(235);function k(){return Object(h.jsx)("div",{children:"Ini Beranda"})}c(169);var y=c(19),S=c.n(y),I=c(41),_=c(104),C=c(42),P=c.n(C),E=c(43);var U=function(e){var t=e.conversation,c=e.currentUser,s=Object(n.useState)(null),a=Object(u.a)(s,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){var e=t.members.find((function(e){return e!==c._id}));(function(){var t=Object(I.a)(S.a.mark((function t(){var c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.a.get(E.API_URL+"user/".concat(e));case 3:c=t.sent,i(c.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[t,c._id]),Object(h.jsx)("div",{className:"friend-body",children:Object(h.jsxs)("div",{className:"friend-container",children:[Object(h.jsxs)("div",{className:"friend-img-container",children:[Object(h.jsx)("img",{src:o,alt:"img-am"}),Object(h.jsx)("div",{className:"friend-online"})]}),Object(h.jsx)("span",{children:null===r||void 0===r?void 0:r.username})]})})},D=c(141);function R(e){var t=e.message,c=e.own;return Object(h.jsxs)("div",{className:c?"message-body own":"message-body",children:[Object(h.jsxs)("div",{className:"message-top",children:[Object(h.jsx)("img",{src:o,alt:"img-am"}),Object(h.jsx)("p",{children:t.text})]}),Object(h.jsx)("div",{className:"message-bottom",children:Object(D.a)(t.createdAt)})]})}var A=c(139);c(217);function L(){var e=Object(n.useContext)(v).user,t=Object(n.useState)([]),c=Object(u.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(null),i=Object(u.a)(r,2),l=i[0],j=i[1],b=Object(n.useState)([]),o=Object(u.a)(b,2),m=o[0],O=o[1],x=Object(n.useState)(""),f=Object(u.a)(x,2),g=f[0],p=f[1],N=Object(n.useState)(null),w=Object(u.a)(N,2),k=w[0],y=w[1],C=Object(n.useRef)(),D=Object(n.useRef)();Object(n.useEffect)((function(){D.current=Object(A.io)("https://pacific-island-17875.herokuapp.com/"),D.current.on("getMessage",(function(e){y({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){k&&(null===l||void 0===l?void 0:l.members.includes(k.sender))&&O((function(e,t){return[].concat(Object(_.a)(e),[k])}))}),[k,l]),Object(n.useEffect)((function(){D.current.emit("addUser",e._id),D.current.on("getUsers",(function(e,t){}))}),[e]),Object(n.useEffect)((function(){var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[m]),Object(n.useEffect)((function(){(function(){var t=Object(I.a)(S.a.mark((function t(){var c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.a.get(E.API_URL+"conversation/".concat(e._id));case 3:c=t.sent,a(c.data),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[e._id]),Object(n.useEffect)((function(){(function(){var e=Object(I.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.get(E.API_URL+"message/".concat(null===l||void 0===l?void 0:l._id));case 3:t=e.sent,O(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[null===l||void 0===l?void 0:l._id]);var L=function(){var t=Object(I.a)(S.a.mark((function t(c){var n,s,a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),n={sender:e._id,text:g,conversationId:l._id},s=l.members.find((function(t,c){return t!==e._id})),D.current.emit("sendMessage",{senderId:e._id,receiverId:s,text:g}),t.prev=4,t.next=7,P.a.post(E.API_URL+"message",n);case 7:a=t.sent,O([].concat(Object(_.a)(m),[a.data])),p(""),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(4);case 14:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"messanger-body",children:[Object(h.jsx)("div",{className:"messanger-section",children:l?Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"messanger-top",children:m.map((function(t,c){return Object(h.jsx)("div",{ref:C,children:Object(h.jsx)(R,{message:t,own:t.sender===e._id},c)},c)}))}),Object(h.jsxs)("form",{className:"messanger-bottom",onSubmit:L,children:[Object(h.jsx)("textarea",{className:"messanger-input",placeholder:"write something...",onChange:function(e){return p(e.target.value)},value:g}),Object(h.jsx)("button",{className:"btn btn-primary messanger-send",children:"Send"})]})]}):Object(h.jsx)("div",{className:"messanger-start",children:"Ayo kita mulai chat dengan teman anda."})}),Object(h.jsxs)("div",{className:"friend-section",children:[Object(h.jsx)("div",{className:"friend-title",children:"Teman anda"}),Object(h.jsx)(d.a,{}),s.map((function(t,c){return Object(h.jsx)("div",{onClick:function(){return j(t)},children:Object(h.jsx)(U,{conversation:t,currentUser:e},c)},c)}))]})]})}function T(){return Object(h.jsx)("div",{children:"Not Found!"})}var z=function(){return Object(h.jsx)("div",{className:"sider-body",children:Object(h.jsxs)(p.a.Pushable,{as:N.a,children:[Object(h.jsxs)(p.a,{as:w.a,animation:"push",direction:"left",icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"thin",children:[Object(h.jsxs)("div",{className:"d-flex profile",children:[Object(h.jsx)("div",{className:"image",children:Object(h.jsx)("img",{src:o,alt:"img-am"})}),Object(h.jsxs)("div",{className:"name-profile",children:[Object(h.jsx)("div",{children:"Hilmi Arizal"}),Object(h.jsx)("div",{children:"Front End Developer"})]})]}),Object(h.jsx)(i.b,{to:"/",children:Object(h.jsx)(w.a.Item,{children:Object(h.jsxs)("div",{className:"d-flex list-menu",children:[Object(h.jsx)("div",{children:Object(h.jsx)(j.a,{name:"home"})}),Object(h.jsx)("div",{className:"name-menu",children:"Beranda"})]})})}),Object(h.jsx)(w.a.Item,{children:Object(h.jsxs)("div",{className:"d-flex list-menu",children:[Object(h.jsx)("div",{children:Object(h.jsx)(j.a,{name:"group"})}),Object(h.jsx)("div",{className:"name-menu",children:"Teman"})]})}),Object(h.jsx)(i.b,{to:"/messanger",children:Object(h.jsx)(w.a.Item,{children:Object(h.jsxs)("div",{className:"d-flex list-menu",children:[Object(h.jsx)("div",{children:Object(h.jsx)(j.a,{name:"chat"})}),Object(h.jsx)("div",{className:"name-menu",children:"Pesan"})]})})}),Object(h.jsx)(w.a.Item,{children:Object(h.jsxs)("div",{className:"d-flex list-menu",children:[Object(h.jsx)("div",{children:Object(h.jsx)(j.a,{name:"alarm"})}),Object(h.jsx)("div",{className:"name-menu",children:"Notifikasi"})]})})]}),Object(h.jsx)(p.a.Pusher,{style:{overflow:"hidden"},children:Object(h.jsx)(N.a,{basic:!0,children:Object(h.jsxs)(r.c,{children:[Object(h.jsx)(r.a,{path:"/",exact:!0,children:Object(h.jsx)(k,{})}),Object(h.jsx)(r.a,{path:"/messanger",exact:!0,children:Object(h.jsx)(L,{})}),Object(h.jsx)(r.a,{path:"*",exact:!0,children:Object(h.jsx)(T,{})})]})})})]})})},F=c.p+"static/media/social-networking.4af96ea8.svg",B=(c(218),function(){var e=Object(I.a)(S.a.mark((function e(t,c){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.post(E.API_URL+"auth/login",t);case 3:n=e.sent,c({type:"LOGIN_SUCCESS",payload:n.data}),localStorage.setItem("user",JSON.stringify(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c){return e.apply(this,arguments)}}());function J(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),c=t[0],s=t[1],a=Object(n.useContext)(v).dispatch,r=Object(n.useRef)(),d=Object(n.useRef)(),o=function(){s(!c)};return Object(h.jsx)("div",{className:"login-body",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-6 left",children:Object(h.jsxs)("div",{className:"title",children:[Object(h.jsx)("div",{className:"text",children:Object(h.jsx)("div",{children:"Hilmi SosMed, Bro!"})}),Object(h.jsx)("div",{className:"image",children:Object(h.jsx)("img",{src:F,alt:"img-sn"})}),Object(h.jsx)("div",{className:"text",children:Object(h.jsxs)("p",{children:[" Hallo bro, bergabung dengan kami sekarang! ",Object(h.jsx)("br",{}),Object(h.jsx)("span",{style:{color:"grey",fontSize:"12px"},children:"Nikmati berbagai macam fitur yang menarik untuk menemani waktu luang kamu."})]})}),Object(h.jsx)("div",{className:"button",children:Object(h.jsx)(i.b,{to:"/register",children:Object(h.jsx)("div",{className:"btn btn-primary btn-sm",children:"Gabung Sekarang"})})})]})}),Object(h.jsx)("div",{className:"col-md-6 right",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("div",{className:"title",children:Object(h.jsx)("img",{src:b,alt:"img-hs"})}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=r.current.value,c=d.current.value;B({username:t,password:c},a)},children:[Object(h.jsx)(l.a,{icon:!0,placeholder:"Username",size:"small",className:"input",children:Object(h.jsx)("input",{ref:r})}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(l.a,{icon:!0,placeholder:"Password",size:"small",className:"input",children:[Object(h.jsx)("input",{ref:d,type:c?"text":"password"}),c?Object(h.jsx)(j.a,{name:"eye slash",onClick:o}):Object(h.jsx)(j.a,{name:"eye",onClick:o})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"d-flex justify-content-end",children:Object(h.jsx)(i.b,{to:"/",className:"link",children:"Forgot Password ?"})}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{className:"btn btn-primary btn-sm",children:"Submit"})]}),Object(h.jsxs)("div",{className:"mt-4 text-center",children:["Belum punya akun ? ",Object(h.jsx)(i.b,{to:"/register",children:"Daftar disini!"})]})]})})]})})}function H(){return Object(h.jsx)("div",{children:"Register"})}var M=function(){return Object(n.useContext)(v).user?Object(h.jsxs)("div",{children:[Object(h.jsx)(g,{}),Object(h.jsx)(z,{})]}):Object(h.jsx)("div",{children:Object(h.jsxs)(r.c,{children:[Object(h.jsx)(r.a,{path:"/SOSMED",exact:!0,children:Object(h.jsx)(J,{})}),Object(h.jsx)(r.a,{path:"/register",children:Object(h.jsx)(H,{})})]})})},G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,240)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};c(219);a.a.render(Object(h.jsx)(f,{children:Object(h.jsx)(i.a,{children:Object(h.jsx)(M,{})})}),document.getElementById("root")),G()},43:function(e){e.exports=JSON.parse('{"API_URL":"https://aqueous-headland-83087.herokuapp.com/"}')}},[[220,1,2]]]);
//# sourceMappingURL=main.ed348d3d.chunk.js.map